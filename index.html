<!DOCTYPE html>
<html>
<head>
    <!-- SAME PERFECT STYLING -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ¤– TerminalGen AI 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>/* YOUR SAME STYLING - UNCHANGED */</style>
</head>
<body>
    <!-- SAME HTML STRUCTURE -->
    <div class="container">
        <!-- ... your same HTML ... -->
    </div>

    <script>
        let allCommands = [];

        // ðŸ”¥ FIXED PATH + BULLETPROOF LOADING
        fetch('./data/commands.json')  // âœ… FIXED: No 'public/', Vercel root path
            .then(r => {
                if (!r.ok) throw new Error('404');
                return r.json();
            })
            .then(commands => {
                // ðŸ”¥ BULLETPROOF CLEANING - Remove invalid entries
                allCommands = commands.filter(cmd => 
                    cmd && 
                    cmd.name && 
                    typeof cmd.name === 'string' && 
                    cmd.language && 
                    typeof cmd.language === 'string'
                );
                
                document.getElementById('statusText').textContent = 
                    `ðŸ§¬ READY - ${allCommands.length.toLocaleString()} quantum nodes synchronized`;
                document.getElementById('terminalOutput').innerHTML += `\nâœ… Full ${allCommands.length.toLocaleString()} dataset loaded!`;
                liveSearch();  // Show top 25
            })
            .catch(err => {
                console.error('JSON load failed:', err);
                // FALLBACK 50 COMMAND DEMO
                allCommands = [/* your 5 demo commands + 45 more */];
                document.getElementById('statusText').textContent = 
                    `ðŸ§¬ READY - ${allCommands.length} demo nodes (full dataset unavailable)`;
                liveSearch();
            });

        // ðŸ”¥ BULLETPROOF LIVESEARCH - NO CRASHES
        function liveSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const list = document.getElementById('commandList');
            list.innerHTML = '';
            let matches = 0;
            
            if (query && allCommands.length > 0) {
                const results = allCommands.filter(cmd => {
                    try {
                        return cmd.name.toLowerCase().includes(query) ||
                               (cmd.description && cmd.description.toLowerCase().includes(query)) ||
                               (cmd.usage && cmd.usage.toLowerCase().includes(query)) ||
                               cmd.language.toLowerCase().includes(query);
                    } catch(e) {
                        return false;  // Skip broken entries
                    }
                }).slice(0, 25);

                results.forEach((cmd, idx) => {
                    const item = document.createElement('div');
                    item.className = 'command-item';
                    item.innerHTML = `<span style="color:#00ffcc">${cmd.language.toUpperCase()}</span> ${cmd.name}`;
                    item.onclick = () => showDetails(cmd);
                    item.style.animationDelay = `${idx * 0.05}s`;
                    list.appendChild(item);
                    matches++;
                });
            } else if (allCommands.length > 0) {
                // Show top 25 valid commands
                allCommands.slice(0, 25).forEach((cmd, idx) => {
                    try {
                        if (cmd.name && cmd.language) {
                            const item = document.createElement('div');
                            item.className = 'command-item';
                            item.innerHTML = `<span style="color:#00ffcc">${cmd.language.toUpperCase()}</span> ${cmd.name}`;
                            item.onclick = () => showDetails(cmd);
                            item.style.animationDelay = `${idx * 0.05}s`;
                            list.appendChild(item);
                            matches++;
                        }
                    } catch(e) {
                        // Skip broken entries
                    }
                });
            }
            
            document.getElementById('statusText').textContent = 
                `ðŸ§  Neural matches: ${matches} / ${allCommands.length.toLocaleString()} nodes`;
        }

        // Rest of your functions unchanged...
        function debouncedSearch() {
            clearTimeout(window.searchTimeout);
            window.searchTimeout = setTimeout(liveSearch, 150);
        }
        // ... rest of your existing functions
    </script>
</body>
</html>
